const e=Object.freeze([]);
/*! (c) Andrea Giammarchi */
const{is:t}=Object;let s;const n=e=>{const t=s;s=t||[];try{if(e(),!t)for(const{value:e}of s);}finally{s=t}};class o{constructor(e){this._=e}then(){return this.value}toJSON(){return this.value}toString(){return this.value}valueOf(){return this.value}}let r;class c extends o{constructor(e,t,s,n){super(e),this.f=n,this.$=!0,this.r=new Set,this.s=new y(t,s)}get value(){if(this.$){const e=r;r=this;try{this.s.value=this._(this.s._)}finally{this.$=!1,r=e}}return this.s.value}}const i={async:!1,equals:!0},a=(e,t,s=i)=>new c(e,t,s,!1);let l;const u=[],h=()=>{},f=({s:e})=>{"function"==typeof e._&&(e._=e._())};class p extends c{constructor(e,t,s){super(e,t,s,!0),this.e=u}run(){return this.$=!0,this.value,this}stop(){this._=h,this.r.clear(),this.s.c.clear()}}class d extends p{constructor(e,t,s){super(e,t,s),this.i=0,this.a=!!s.async,this.m=!0,this.e=[]}get value(){this.a?this.async():this.sync()}async(){this.m&&(this.m=!1,queueMicrotask((()=>{this.m=!0,this.sync()})))}sync(){const e=l;(l=this).i=0,f(this),super.value,l=e}stop(){super.stop(),f(this);for(const e of this.e.splice(0))e.stop()}}const v=()=>!1;class y extends o{constructor(e,{equals:s}){super(e),this.c=new Set,this.s=!0===s?t:s||v}peek(){return this._}get value(){return r&&(this.c.add(r),r.r.add(this)),this._}set value(e){const t=this._;if(!this.s(this._=e,t)&&this.c.size){const e=[],t=[this];for(const s of t)for(const n of s.c)if(!n.$&&n.r.has(s))if(n.r.clear(),n.$=!0,n.f){e.push(n);const t=[n];for(const e of t)for(const s of e.e)s.r.clear(),s.$=!0,t.push(s)}else t.push(n.s);for(const t of e)s?s.push(t):t.value}}}const g=(e,t=i)=>new y(e,t),b={async:!1},N=(e,t)=>((e,t,s=i)=>{let n;if(l){const{i:o,e:r}=l,c=o===r.length;(c||r[o]._!==e)&&(c||r[o].stop(),r[o]=new d(e,t,s).run()),n=r[o],l.i++}else n=new d(e,t,s).run();return()=>{n.stop()}})(e,t,b),T=(e,t,s,n)=>{const o=s.length;let r=t.length,c=o,i=0,a=0,l=null;for(;i<r||a<c;)if(r===i){const t=c<o?a?s[a-1].nextSibling:s[c-a]:n;for(;a<c;)e.insertBefore(s[a++],t)}else if(c===a)for(;i<r;)l&&l.has(t[i])||t[i].remove(),i++;else if(t[i]===s[a])i++,a++;else if(t[r-1]===s[c-1])r--,c--;else if(t[i]===s[c-1]&&s[a]===t[r-1]){const n=t[--r].nextSibling;e.insertBefore(s[a++],t[i++].nextSibling),e.insertBefore(s[--c],n),t[r]=s[c]}else{if(!l){l=new Map;let e=a;for(;e<c;)l.set(s[e],e++)}if(l.has(t[i])){const n=l.get(t[i]);if(a<n&&n<c){let o=i,u=1;for(;++o<r&&o<c&&l.get(t[o])===n+u;)u++;if(u>n-a){const o=t[i];for(;a<n;)e.insertBefore(s[a++],o)}else e.replaceChild(s[a++],t[i++])}else i++}else t[i++].remove()}return s},{ATTRIBUTE:m,COMPONENT:k,ELEMENT:w,FRAGMENT:x,INTERPOLATION:E,STATIC:O}=class{static ATTRIBUTE=1;static COMPONENT=2;static ELEMENT=3;static FRAGMENT=4;static INTERPOLATION=5;static STATIC=6;get properties(){const{attributes:e}=this;if(e.length){const t={};for(const s of e)s.type<2?t[s.name]=s.value:Object.assign(t,s.value);return t}return null}},{isArray:A}=Array,{assign:C,getPrototypeOf:M,prototype:{isPrototypeOf:_}}=Object,S=_.bind(o.prototype),I={async:!1,equals:!0},B=e=>new p(e,void 0,I);let R;const $=new WeakMap,P=(e,t)=>{const s="function"==typeof e?e():e;R||(R=_.bind(M(s)));let o=$.get(t);if(!o||o.token.id!==s.id){o&&o.fx.stop();const[e,r]=q(s);o={token:s,info:{updates:e,content:s.type===x?G(r):r},fx:new d((e=>!!n((()=>L(o.token,e,o.info)))),!0,I)},$.set(t,o),t.replaceChildren(r)}o.token=s,o.fx.run()},L=(t,s,{updates:n,content:o})=>{const r=s?[]:e;for(let e=0;e<n.length;e++){const s=n[e](t,o);s&&r.push(n[e]=s)}for(let e=0;e<r.length;e++)r[e](t,o)},j=new WeakMap,q=e=>{let t=j.get(e.id);if(!t){const s=[],n=z(e,s,[],[]);j.set(e.id,t=[s,n])}const[s,n]=t;return[s.slice(),n.cloneNode(!0)]};let{document:F}=globalThis;const W=e=>{F=e},z=(e,t,s,n)=>{let o,r;e:switch(e.type){case E:{const{value:s}=e;switch(!0){case R(s):o=X;break;case A(s):o=Y;break;case S(s):o=re.bind(s);break;default:r=F.createTextNode(""),t.push(K(n));break e}}case k:r=F.createComment("ðŸ™Š"),t.push((o||V)(n));break;case w:{const{attributes:o,name:c}=e,i=[c],a=[];for(let e=0;e<o.length;e++){const t=o[e];t.type===m&&"is"===t.name?i.push({extends:t.value}):t.type===E||t.dynamic?s.push(e):a.push(t)}s.length&&t.push(H(s,n)),r=F.createElement(...i);for(const{name:e,value:t}of a)se(r,e,t,!0);J(e,t,r,n);break}case x:r=F.createDocumentFragment(),J(e,t,r,n)}return r},G=({childNodes:e})=>({childNodes:[...e]}),U=({childNodes:e},t)=>e[t],D=({children:e},t)=>e[t],J=({children:e},t,s,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.type===O)s.appendChild(F.createTextNode(r.value));else s.appendChild(z(e[o],t,[],n.concat(o)))}},H=(e,t)=>(s,n)=>{const o={};return n=t.reduce(U,n),s=>{const{attributes:r}=t.reduce(D,s);for(const t of e){const{name:e,value:s}=r[t];oe(n,e,s,o)}}},K=e=>(t,s)=>(s=e.reduce(U,s),t=>{const{value:n}=e.reduce(D,t);(null==n?"":String(n))!==s.data&&(s.data=n)}),Q=t=>s=>(n,o)=>{o=s.reduce(U,o);const{parentNode:r}=o,c={};let i=e;return e=>{e=s.reduce(D,e);const n=c.result,a=t?e.value(e.properties,...e.children):e,l=!n||a.id!==n.id;if(l){const[e,t]=q(a),s=a.type===x;C(c,{result:a,updates:e,content:s?G(t):t}),i=T(r,i,s?c.content.childNodes:[t],o)}L(a,l,c)}},V=Q(!0),X=Q(!1),Y=t=>(s,n)=>{n=t.reduce(U,n);const{parentNode:o}=n,r=new Map;let c=e;return s=>{const{value:i}=t.reduce(D,s),a=i.map(ie,r),l=[],u=[],h=c===e;for(const[e,t,s]of a)l.push([e,t]),u.push(...s);if(u.length){c=T(o,c,u,n);for(const[e,t]of l)L(e,h,t)}else if(c!==e){const t=F.createRange();t.setStartBefore(c[0]),t.setEndAfter(c[c.length-1]),t.deleteContents(),r.clear(),c=e}}},Z=new Map;let ee=!1;const te=(e,t)=>{ee=!0,Z.set(e,t)},se=(e,t,s,n)=>{n?e.setAttribute(t,s):e[t]=s},ne=(e,t,s,n)=>{S(s)?B((()=>{se(e,t,s.value,n)})).run():se(e,t,s,n)},oe=(e,t,s,n)=>{if(ee&&Z.has(t))Z.get(t)(e,s,n);else if(n[t]!==s)switch(n[t]=s,t){case"class":t+="Name";case"className":case"textContent":ne(e,t,s,!1);break;case"ref":s.current=e;break;default:t.startsWith("on")?e[t.toLowerCase()]=s:t in e?ne(e,t,s,!1):null==s?e.removeAttribute(t):ne(e,t,s,!0)}};function re(e){const t=this.peek();return(s,n)=>{if(R(t)){const o=e.slice(),r=Q(t.type===k)(o)(s,n),c=B((()=>{r(this.value)}));return()=>{o.length&&(o.splice(0),c.run())}}{const t=F.createTextNode("");return e.reduce(U,n).replaceWith(t),B((()=>{t.data=this.value})).run(),Function.prototype}}}const ce=({name:e})=>"key"===e;function ie(e,t){const{value:s}=e.attributes.find(ce)||{value:t};let n=this.get(s);if(!n){const[t,o]=q(e);switch(e.type){case w:n=[e,{updates:t,content:o},[o]];break;case k:{const t=e.value(e.properties,...e.children),[s,o]=q(t),r=t.type===x,c=r?G(o):o;n=[t,{updates:s,content:c},r?c.childNodes:[o]];break}case x:const s=G(o);n=[e,{updates:t,content:s},s.childNodes]}this.set(s,n)}return n}export{d as Effect,p as FX,o as Signal,n as batch,a as computed,T as diff,N as effect,P as render,g as signal,W as useDocument,te as useProperty};
