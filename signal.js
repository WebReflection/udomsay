class e{#e;#t=[];constructor(e){this.#e=e}get value(){const{length:e}=o;return e&&this.#t.push(o[e-1]),this.#e}set value(e){this.#e!==e&&(this.#e=e,this.#t.length&&(r===o?c(this.#t.splice(0)):r.push(...this.#t.splice(0))))}peek(){return this.#e}then(){return this.value}toJSON(){return this.value}valueOf(){return this.value}toString(){return String(this.value)}}class t extends e{constructor(e,t){super(t),this.dispose=i((()=>{super.value=e(this.peek())}))}get value(){return super.value}set value(e){throw new Error("computed is read-only")}}const s=e=>{const t=r===o;t&&(r=[]);try{e()}finally{if(t){const e=r;r=o,c(e)}}},n=(e,s)=>new t(e,s),i=(e,t)=>{let s=!0;const n=()=>{if(s){o.push(n);try{t=e(t)}finally{o.pop()}}},i=()=>{s=!1;for(const e of l.get(n))e()};l.set(n,[]);const{length:a}=o;return a&&l.get(o[a-1]).push(i),n(),i},a=t=>new e(t),o=[],l=new WeakMap,c=e=>{for(const t of new Set(e))t()};let r=o;var u=(0,Object.freeze)([]),h=()=>{};const f=(e,t,s)=>{const{parentNode:n}=s,i=t.length;let a=e.length,o=i,l=0,c=0,r=null;for(;l<a||c<o;)if(a===l){const e=o<i?c?t[c-1].nextSibling:t[o-c]:s;for(;c<o;)n.insertBefore(t[c++],e)}else if(o===c)for(;l<a;)r&&r.has(e[l])||e[l].remove(),l++;else if(e[l]===t[c])l++,c++;else if(e[a-1]===t[o-1])a--,o--;else if(e[l]===t[o-1]&&t[c]===e[a-1]){const s=e[--a].nextSibling;n.insertBefore(t[c++],e[l++].nextSibling),n.insertBefore(t[--o],s),e[a]=t[o]}else{if(!r){r=new Map;let e=c;for(;e<o;)r.set(t[e],e++)}if(r.has(e[l])){const s=r.get(e[l]);if(c<s&&s<o){let i=l,u=1;for(;++i<a&&i<o&&r.get(e[i])===s+u;)u++;if(u>s-c){const i=e[l];for(;c<s;)n.insertBefore(t[c++],i)}else n.replaceChild(t[c++],e[l++])}else l++}else e[l++].remove()}return t},{isArray:p}=Array,{getPrototypeOf:d,prototype:{isPrototypeOf:g}}=Object,{COMPONENT:v,ELEMENT:b,FRAGMENT:w,INTERPOLATION:N,STATIC:m}=class{static ATTRIBUTE=1;static COMPONENT=2;static ELEMENT=3;static FRAGMENT=4;static INTERPOLATION=5;static STATIC=6;get properties(){const{attributes:e}=this;if(e.length){const t={};for(const s of e)s.type<2?t[s.name]=s.value:Object.assign(t,s.value);return t}return null}},y=({childNodes:e},t)=>e[t],T=({children:e},t)=>e[t],E=({value:e,properties:t,children:s})=>e(t,...s),S=({name:e})=>"key"===e,k=(e,{content:t})=>e.reduce(y,t),O=(e,t)=>e.reduce(T,t),A=(e,t)=>{const s=null==t?"":String(t);s!==e.data&&(e.data=s)};
/*! (c) Andrea Giammarchi - ISC */var C=(e={})=>{const t=e.document||globalThis.document,s=new Map(e.plugins||[]),n=!!s.size,i=e.diff||f,a=e.effect||(e=>(e(),h)),o=e.getPeek||(e=>e.peek()),l=e.getValue||(e=>e.value),c=e.isSignal||(e.Signal?g.bind(e.Signal.prototype):()=>!1),r=e=>t.createTextNode(e),y=(e,t)=>{e.dispose();const s=a((()=>{const s=E(t);s.id!==e.id?e=T(e,s,!1):e.update(s)}));return e.dispose=s,e},T=(e,t,s)=>t.type===v?y(e,t):((e,t,s)=>(e.dispose(),e=new C(t),s?e.dispose=a((()=>e.update(t))):e.update(t),e))(e,t,s);class C{constructor(e,t=!0){const[s,n]=t?R(e):[u,null];this._=t&&e.type===w,this.id=e.id,this.updates=s,this.content=n,this.dispose=h}get $(){const{content:e,_:t}=this;return t?(this._=!t,(this.content=(({childNodes:e})=>({childNodes:[...e]}))(e)).childNodes):[e]}update(e){for(const t of this.updates)t.call(this,e)}}const M=new C({id:null},!1),x={id:null,view:M},I=new WeakMap;let P;const B=new WeakMap,R=e=>{let t=B.get(e.id);if(!t){const s=[],n=U(e,s,[],u,!1);B.set(e.id,t=[s,n])}const[s,n]=t;return[s.slice(),n.cloneNode(!0)]},$=(e,t,s,n)=>{n?e.setAttribute(t,s):e[t]=s},L=(e,t,s,n,i)=>{if(c(s)){const o="ðŸ™Š"+t;o in n&&n[o](),n[o]=a((()=>{$(e,t,l(s),i)}))}else $(e,t,s,i)},W=(e,t,i,a)=>{if(n&&s.has(t))s.get(t)(e,i,a);else if(a[t]!==i)switch(a[t]=i,t){case"class":t+="Name";case"className":case"textContent":L(e,t,i,a,!1);break;case"ref":i.current=e;break;default:t.startsWith("on")?e[t.toLowerCase()]=i:t in e?L(e,t,i,a,!1):null==i?e.removeAttribute(t):L(e,t,i,a,!0)}},j=(e,t,s)=>function(n){const i={},a=k(t,this);(this.updates[s]=s=>{const{attributes:n}=O(t,s);for(const t of e){const{name:e,value:s}=n[t];W(a,e,s,i)}})(n)},F=(e,s)=>function(n){let a=u,o=!0,l=-1;const c=k(e,this),r=new Map;(this.updates[s]=s=>{const{value:n}=O(e,s),h=[];for(let e=0;e<n.length;e++){const t=n[e];o&&(o=!o,l=t.attributes.findIndex(S));const s=l<0?e:t.attributes[l].value;let{id:i,view:a}=r.get(s)||x;i!==t.id?(a=T(a,t,!1),r.set(s,{id:t.id,view:a})):a.update(t),h.push(...a.$)}if(h.length)a=i(a,h,c);else if(a!==u){const e=t.createRange();e.setStartBefore(a[0]),e.setEndAfter(a[a.length-1]),e.deleteContents(),r.clear(),a=u,o=!0}})(n)},_=(e,t)=>function(s){let n=u,a=M;const o=k(e,this);(this.updates[t]=t=>{a=y(a,O(e,t)),n=i(n,a.$,o)})(s)},z=(e,t)=>function(s){const n=k(e,this);(this.updates[t]=t=>{A(n,O(e,t).value)})(s)},G=(e,t)=>function(s){let n,c,f=h;const p=k(e,this),{value:d}=O(e,s),g=e=>{n!==e&&(f(),n=e,f=a(c))};if(P(o(d))){let e=u,t=M;c=()=>{const s=l(n);t=T(t,s,!1),e=i(e,t.$,p)}}else{const e=r("");p.replaceWith(e),c=()=>{A(e,l(n))}}this.updates[t]=t=>g(O(e,t).value),g(d)},D=(e,t)=>function(s){let n=u,a=M,o=null;const l=k(e,this);(this.updates[t]=t=>{t=O(e,t).value,o!==t.id?(o=t.id,a=T(a,t,!1),n=i(n,a.$,l)):t.type===v?a.update(E(t)):a.update(t)})(s)},J=({children:e},t,s,n,i)=>{for(let a=0;a<e.length;a++){const o=e[a];if(o.type===m)s.appendChild(r(o.value));else s.appendChild(U(e[a],t,[],n.concat(a),i))}},U=(e,s,n,i,a)=>{let o,l;const{length:u}=s;e:switch(e.type){case N:{const{value:t}=e;switch(!0){case P(t):o=D;break;case p(t):o=F;break;case c(t):o=G;break;default:l=r(""),s.push(z(i,u));break e}}case v:l=t.createComment("ðŸ™Š"),s.push((o||_)(i,u));break;case b:{const{attributes:o,name:c}=e,r=[c],h=[];for(let e=0;e<o.length;e++){const t=o[e];t.type===N||t.dynamic?S(t)||n.push(e):("is"===t.name&&r.push({is:t.value}),h.push(t))}n.length&&s.push(j(n,i,u)),l=a||(a="svg"===c)?t.createElementNS("http://www.w3.org/2000/svg",...r):t.createElement(...r);for(const{name:e,value:t}of h)$(l,e,t,!0);J(e,s,l,i,a);break}case w:l=t.createDocumentFragment(),J(e,s,l,i,a)}return l};return(e,t)=>{const s="function"==typeof e?e():e;P||(P=g.bind(d(s)));const n=T(I.get(t)||M,s,!0);I.set(t,n),t.replaceChildren(...n.$)}};const M=(t={})=>C({...t,Signal:e,effect:i,isSignal:void 0});export{t as Computed,e as Signal,s as batch,n as computed,M as createRender,i as effect,a as signal};
